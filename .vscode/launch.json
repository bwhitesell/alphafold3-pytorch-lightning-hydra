{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python Debugger: Current File",
            "type": "debugpy",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                // "--skip_existing",
                // "--no_workers", "1",
            ]
        },
        {
            "name": "filter_pdb_train_mmcifs.py",
            "type": "debugpy",
            "request": "launch",
            "program": "scripts/filter_pdb_train_mmcifs.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--mmcif_assembly_dir", "data/pdb_data/unfiltered_assembly_mmcifs",
                "--mmcif_asym_dir", "data/pdb_data/unfiltered_asym_mmcifs",
                "--output_dir", "data/pdb_data/dev_train_mmcifs",
                // "--min_cutoff_date", "1971-01-01",
                // "--max_cutoff_date", "2021-09-30",
                // "--skip_existing",
                // "--split", "eval",
                "--no_workers", "1",
            ]
        },
        {
            "name": "filter_pdb_val_mmcifs.py",
            "type": "debugpy",
            "request": "launch",
            "program": "scripts/filter_pdb_val_mmcifs.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--mmcif_assembly_dir", "data/pdb_data/unfiltered_assembly_dev_mmcifs",
                "--mmcif_asym_dir", "data/pdb_data/unfiltered_asym_dev_mmcifs",
                "--output_dir", "data/pdb_data/dev_val_mmcifs",
                // "--min_cutoff_date", "2021-10-01",
                // "--max_cutoff_date", "2023-01-13",
                // "--skip_existing",
                // "--split", "eval",
                "--no_workers", "1",
            ]
        },
        {
            "name": "cluster_pdb_train_mmcifs.py",
            "type": "debugpy",
            "request": "launch",
            "program": "scripts/cluster_pdb_train_mmcifs.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--mmcif_dir", "data/pdb_data/dev_train_mmcifs",
                // "--mmcif_dir", "data/pdb_data/train_mmcifs",
                "--output_dir", "data/pdb_data/data_caches/dev_train_clusterings",
                // "--output_dir", "data/pdb_data/data_caches/train_clusterings",
                "--clustering_filtered_pdb_dataset",
                // "--no_workers", "16",
                "--no_workers", "1",
            ]
        },
        {
            "name": "cluster_pdb_val_mmcifs.py",
            "type": "debugpy",
            "request": "launch",
            "program": "scripts/cluster_pdb_val_mmcifs.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                // "--mmcif_dir", "data/pdb_data/dev_val_mmcifs",
                "--mmcif_dir", "data/pdb_data/val_mmcifs",
                // "--output_dir", "data/pdb_data/data_caches/dev_val_clusterings",
                "--output_dir", "data/pdb_data/data_caches/val_clusterings",
                "--clustering_filtered_pdb_dataset",
                // "--max_num_tokens", "2048",
                // "--no_workers", "16",
                "--no_workers", "1",
            ]
        },
        {
            "name": "train.py",
            "type": "debugpy",
            "request": "launch",
            "program": "alphafold3_pytorch/train.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "experiment=af3_initial_training",
                "~callbacks.learning_rate_monitor",
                "data.batch_size=1",
                "data.num_workers=0",
                "data.multiprocessing_context=null",
                "data.prefetch_factor=null",
                "data.persistent_workers=false",
                "~logger",
                "~logger.wandb",
                "model.net.diffusion_num_augmentations=4",
                "+model.net.dim_atom=8",
                "+model.net.dim_pairwise=8",
                "+model.net.dim_single=8",
                "+model.net.dim_token=8",
                "+model.net.confidence_head_kwargs={pairformer_depth: 1}",
                "+model.net.template_embedder_kwargs={pairformer_stack_depth: 1}",
                "+model.net.msa_module_kwargs={depth: 1, dim_msa: 8}",
                "+model.net.pairformer_stack={depth: 1, pair_bias_attn_dim_head: 4, pair_bias_attn_heads: 2}",
                "+model.net.diffusion_module_kwargs={atom_encoder_depth: 1, token_transformer_depth: 1, atom_decoder_depth: 1, atom_encoder_kwargs: {attn_pair_bias_kwargs: {dim_head: 4}}, atom_decoder_kwargs: {attn_pair_bias_kwargs: {dim_head: 4}}}",
                "strategy=default",
                // "~strategy.ignored_modules",
                "trainer=default",
                "trainer.accelerator=cpu",
                "trainer.devices=1",
                // "+trainer.precision=32",
                "+trainer.detect_anomaly=true",
            ]
        },
        {
            "name": "train.py: Overfitting Experiment",
            "type": "debugpy",
            "request": "launch",
            "program": "alphafold3_pytorch/train.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "experiment=af3_overfitting_e1",
                "~callbacks.learning_rate_monitor",
                // "data.ablate_weighted_pdb_sampler=true",
                // "data.uniprot_accession_to_tax_id_mapping_loading_batch_size=8192",
                // "data.num_tax_id_mappings_to_keep=10000000",
                // "data.max_msas_per_chain=128",
                "data.constraints=[pocket, contact, docking]",
                "data.batch_size=1",
                "data.num_workers=0",
                "data.multiprocessing_context=null",
                "data.prefetch_factor=null",
                "data.persistent_workers=false",
                "~logger",
                "~logger.wandb",
                // "model.net.diffusion_num_augmentations=4",
                "+model.net.dim_atom=8",
                "+model.net.dim_pairwise=8",
                "+model.net.dim_single=8",
                "+model.net.dim_token=8",
                "+model.net.confidence_head_kwargs={pairformer_depth: 1}",
                "+model.net.template_embedder_kwargs={pairformer_stack_depth: 1}",
                "+model.net.msa_module_kwargs={depth: 1, dim_msa: 8}",
                "+model.net.pairformer_stack={depth: 1, pair_bias_attn_dim_head: 4, pair_bias_attn_heads: 2}",
                "+model.net.diffusion_module_kwargs={atom_encoder_depth: 1, token_transformer_depth: 1, atom_decoder_depth: 1, atom_encoder_kwargs: {attn_pair_bias_kwargs: {dim_head: 4}}, atom_decoder_kwargs: {attn_pair_bias_kwargs: {dim_head: 4}}}",
                "model.net.plm_embeddings=${resolve_list_as_tuple:[esm2_t33_650M_UR50D,prostT5]}",
                "model.net.nlm_embeddings=${resolve_list_as_tuple:[rinalmo]}",
                "strategy=default",
                // "~strategy.ignored_modules",
                "trainer=default",
                "trainer.accelerator=cpu",
                "trainer.devices=1",
                // "trainer.max_steps=2",
                // "trainer.val_check_interval=1",
                // "trainer.precision=32",
                // "+trainer.detect_anomaly=true",
            ]
        },
        {
            "name": "eval.py",
            "type": "debugpy",
            "request": "launch",
            "program": "alphafold3_pytorch/eval.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "experiment=af3_initial_training",
                "~callbacks.learning_rate_monitor",
                "data.batch_size=8",
                "~logger",
                "~logger.wandb",
                "model.net.diffusion_num_augmentations=4",
                "+model.net.dim_atom=8",
                "+model.net.dim_pairwise=8",
                "+model.net.dim_single=8",
                "+model.net.dim_token=8",
                "+model.net.confidence_head_kwargs={pairformer_depth: 1}",
                "+model.net.template_embedder_kwargs={pairformer_stack_depth: 1}",
                "+model.net.msa_module_kwargs={depth: 1, dim_msa: 8}",
                "+model.net.pairformer_stack={depth: 1, pair_bias_attn_dim_head: 4, pair_bias_attn_heads: 2}",
                "+model.net.diffusion_module_kwargs={atom_encoder_depth: 1, token_transformer_depth: 1, atom_decoder_depth: 1, atom_encoder_kwargs: {attn_pair_bias_kwargs: {dim_head: 4}}, atom_decoder_kwargs: {attn_pair_bias_kwargs: {dim_head: 4}}}",
                "strategy=ddp_spawn",
                "trainer=ddp_sim",
                "trainer.devices=8",
                "+trainer.precision=32",
                // "+trainer.detect_anomaly=true",
            ]
        }
    ]
}
